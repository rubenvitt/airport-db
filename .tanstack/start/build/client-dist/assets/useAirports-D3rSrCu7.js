import{u as o}from"./useQuery-t-Rchcwv.js";import{f as y,A as i}from"./config-E9PhRRCg.js";import{Y as m}from"./main-Bt9JGKqn.js";const s=new m(10,6e4),c={async searchAirports(e){if(!s.canMakeRequest()){const a=s.getResetTime(),u=Math.max(0,a-Date.now());throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(u/1e3)} seconds. Remaining requests: ${s.getRemainingRequests()}`)}const r={};e.iata&&(r.iata=e.iata),e.icao&&(r.icao=e.icao);const n=["name","city","country","region","min_elevation_ft","max_elevation_ft"].filter(a=>e[a]);return n.length>0&&(console.warn(`Premium parameters requested but not available in free tier: ${n.join(", ")}`),console.warn("Free tier only supports IATA and ICAO code searches")),await y(`${i.apiNinjas.baseUrl}${i.apiNinjas.endpoints.airports}`,{headers:{"X-Api-Key":i.apiNinjas.key},params:r})},async getAirportByIATA(e){return(await this.searchAirports({iata:e}))[0]||null},async getAirportByICAO(e){return(await this.searchAirports({icao:e}))[0]||null},async searchByName(e){return console.warn("searchByName requires API Ninjas premium tier"),[]},async getAirportsByCity(e,r){return console.warn("getAirportsByCity requires API Ninjas premium tier"),[]},async getAirportsByCountry(e){return console.warn("getAirportsByCountry requires API Ninjas premium tier"),[]}},t={all:["airports"],search:e=>[...t.all,"search",e],byIATA:e=>[...t.all,"iata",e],byICAO:e=>[...t.all,"icao",e],byCity:(e,r)=>[...t.all,"city",e,r],byCountry:e=>[...t.all,"country",e]};function g(e,r){return o({queryKey:t.byIATA(e),queryFn:()=>c.getAirportByIATA(e),staleTime:30*60*1e3,gcTime:60*60*1e3,enabled:!!e&&((r==null?void 0:r.enabled)??!0)})}function h(e,r){return o({queryKey:t.byICAO(e),queryFn:()=>c.getAirportByICAO(e),staleTime:30*60*1e3,gcTime:60*60*1e3,enabled:!!e&&((r==null?void 0:r.enabled)??!0)})}export{h as a,g as u};
