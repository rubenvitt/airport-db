import{c as L,U as O,Q as E,r as f,j as e,B as m,p as U,H,V as z,C as l,h as x,i as h,m as c,o as u,t as G,l as V}from"./main-FRew77rr.js";import{b as q,c as J,T as C}from"./useFlights-C9gj0xba.js";import{a as Q,E as X}from"./config-D3yqgZa1.js";import{B as K}from"./badge-CNVQfe9m.js";import{A as F}from"./arrow-left-Del__CYi.js";import{N as W}from"./navigation-BYzYQWGu.js";import{C as Y}from"./compass-vzY1vnft.js";import{I as Z}from"./info-CyLf4e8o.js";import"./useQuery-CIK-XuR-.js";import"./circle-alert-B8_bFIsf.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],se=L("Flag",ee);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],A=L("Gauge",te),ge=function(){var y,w,_,k,S;const{flightId:r}=O.useParams(),j=E(),[o,p]=f.useState(!1),[T,I]=f.useState(new Date),{data:s,isLoading:g,error:N,refetch:$}=q(r),{data:n,isLoading:re}=J(r,{enabled:!!s});f.useEffect(()=>{const t=localStorage.getItem("favoriteFlights");if(t){const a=JSON.parse(t);p(a.some(i=>i.icao24===r))}},[r]);const D=()=>{var i;const t=localStorage.getItem("favoriteFlights");let a=t?JSON.parse(t):[];o?a=a.filter(R=>R.icao24!==r):s&&a.push({callsign:((i=s.callsign)==null?void 0:i.trim())||s.icao24,icao24:s.icao24,origin_country:s.origin_country,addedAt:new Date().toISOString()}),localStorage.setItem("favoriteFlights",JSON.stringify(a)),p(!o)},M=()=>{$(),I(new Date)},d=t=>new Date(t*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),v=t=>t?`${Math.round(t*3.28084).toLocaleString()} ft`:"Ground",B=t=>{if(!t)return"N/A";const a=Math.round(t*1.94384),i=Math.round(t*3.6);return`${a} kts / ${i} km/h`},P=t=>t.on_ground?{label:"On Ground",variant:"secondary",color:"text-gray-600"}:!t.velocity||t.velocity<50?{label:"Stationary",variant:"outline",color:"text-gray-600"}:t.vertical_rate&&t.vertical_rate>5?{label:"Climbing",variant:"default",color:"text-green-600"}:t.vertical_rate&&t.vertical_rate<-5?{label:"Descending",variant:"default",color:"text-orange-600"}:{label:"Cruising",variant:"default",color:"text-blue-600"};if(g)return e.jsx("div",{className:"container py-8 max-w-6xl mx-auto",children:e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Q,{text:`Loading flight ${r}...`})})});if(N||!s)return e.jsx("div",{className:"container py-8 max-w-6xl mx-auto",children:e.jsx(X,{title:"Flight not found",message:`Unable to find flight with ID "${r}". The flight may have landed or the transponder may be offline.`,error:N,action:e.jsxs(m,{onClick:()=>j({to:"/flights"}),className:"mt-4",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Back to Flight Tracker"]})})});const b=P(s);return e.jsxs("div",{className:"container py-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(m,{variant:"ghost",onClick:()=>j({to:"/flights"}),className:"mb-4",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Back to Flight Tracker"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(U,{className:"h-10 w-10 text-primary"}),((y=s.callsign)==null?void 0:y.trim())||s.icao24]}),e.jsxs("p",{className:"text-xl text-muted-foreground flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),s.origin_country]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:b.variant,className:"text-lg px-4 py-2",children:b.label}),e.jsx(m,{variant:o?"default":"outline",size:"icon",onClick:D,className:"ml-2",children:e.jsx(H,{className:`h-5 w-5 ${o?"fill-current":""}`})}),e.jsx(m,{variant:"outline",size:"icon",onClick:M,disabled:g,children:e.jsx(z,{className:`h-5 w-5 ${g?"animate-spin":""}`})})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",T.toLocaleTimeString()]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(l,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Current Position"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Latitude"}),e.jsxs("p",{className:"font-medium",children:[((w=s.latitude)==null?void 0:w.toFixed(6))||"N/A","°"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Longitude"}),e.jsxs("p",{className:"font-medium",children:[((_=s.longitude)==null?void 0:_.toFixed(6))||"N/A","°"]})]})]}),e.jsx(u,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Last Contact"}),e.jsx("p",{className:"font-medium",children:d(s.last_contact)})]}),s.latitude&&s.longitude&&e.jsx("div",{className:"pt-2",children:e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${s.latitude},${s.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary hover:underline",children:[e.jsx(G,{className:"h-4 w-4"}),"View Current Position"]})})]})]}),e.jsxs(l,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Flight Metrics"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Altitude"}),e.jsx("p",{className:"font-medium",children:v(s.geo_altitude)}),s.baro_altitude&&s.baro_altitude!==s.geo_altitude&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Barometric: ",v(s.baro_altitude)]})]})]}),e.jsx(u,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Speed"}),e.jsx("p",{className:"font-medium",children:B(s.velocity)})]})]}),e.jsx(u,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Heading"}),e.jsx("p",{className:"font-medium",children:s.true_track?`${Math.round(s.true_track)}°`:"N/A"})]})]}),s.vertical_rate!==null&&s.vertical_rate!==0&&e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:`h-4 w-4 ${s.vertical_rate>0?"text-green-600":"text-red-600 rotate-180"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vertical Rate"}),e.jsxs("p",{className:`font-medium ${s.vertical_rate>0?"text-green-600":"text-red-600"}`,children:[Math.abs(Math.round(s.vertical_rate*196.85))," ft/min ",s.vertical_rate>0?"↑":"↓"]})]})]})]})]})]}),e.jsxs(l,{className:"md:col-span-2",children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Technical Details"]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"ICAO24 Code"}),e.jsx("p",{className:"font-medium font-mono",children:s.icao24})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Callsign"}),e.jsx("p",{className:"font-medium font-mono",children:((k=s.callsign)==null?void 0:k.trim())||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Squawk Code"}),e.jsx("p",{className:"font-medium font-mono",children:s.squawk||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"SPI Signal"}),e.jsx("p",{className:"font-medium",children:s.spi?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Position Source"}),e.jsx("p",{className:"font-medium",children:s.position_source===0?"ADS-B":s.position_source===1?"ASTERIX":s.position_source===2?"MLAT":"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Category"}),e.jsxs("p",{className:"font-medium",children:["Aircraft Category ",s.category||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Time Position"}),e.jsx("p",{className:"font-medium",children:s.time_position?d(s.time_position):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Sensors"}),e.jsx("p",{className:"font-medium",children:((S=s.sensors)==null?void 0:S.join(", "))||"N/A"})]})]})})]}),n&&n.path.length>0&&e.jsxs(l,{className:"md:col-span-2",children:[e.jsxs(x,{children:[e.jsx(h,{children:"Flight Path"}),e.jsx(V,{children:"Historical track data for this flight"})]}),e.jsxs(c,{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.path.length," position reports recorded"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["From: ",d(n.startTime)," to ",d(n.endTime)]})]})]})]}),e.jsx(l,{className:"mt-6 border-muted",children:e.jsx(c,{className:"pt-6",children:e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Live flight data provided by OpenSky Network. Data may be delayed by up to 15 seconds for security reasons."})})})]})};export{ge as component};
