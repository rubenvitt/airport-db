const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leaflet-src-BOn6DA1B.js","assets/main-C72e0wOY.js","assets/styles-BJuize5l.css","assets/index-CE07PzCI.js"])))=>i.map(i=>d[i]);
import{c as u,r,J as Q,a2 as W,j as e,C,T as X,_ as L,B as v}from"./main-C72e0wOY.js";import{a as Z,B as M}from"./badge-D_v6iEMF.js";import{h as Y,i as S}from"./LazyComparisonChart-B50SKzJz.js";import"./select-DoP4Ndxy.js";import"./input-Dcuoicru.js";import"./search-NRKEvCcW.js";import"./globe-sbuWZGaV.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],ee=u("Move",G);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["polygon",{points:"12 2 19 21 12 17 5 21 12 2",key:"x8c0qg"}]],se=u("Navigation2",ne);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ae=u("ZoomIn",te);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ce=u("ZoomOut",oe);function le({airports:c=[],selectedAirport:h,onAirportSelect:d,center:f=[39.8283,-98.5795],zoom:p=4,height:x="500px",showControls:j=!0,useGlobalState:a=!1,mapState:m,updateMapCenter:E,updateMapZoom:I,setGlobalSelectedAirport:N,updateMapState:k,preferences:ie,onMapClick:y,allowMarkerDrag:g=!1,onMarkerDragEnd:w}){const[t,P]=r.useState(null),O=a?m.center:f,U=a?m.zoom:p,l=a?m.selectedAirport:h,$=r.useCallback(n=>{a&&(N(n),k({center:[n.latitude,n.longitude],zoom:13,selectedAirport:n})),d==null||d(n),Y(n)},[a,N,k,d]),_=r.useMemo(()=>{var n;if(!((n=t==null?void 0:t.L)!=null&&n.Icon))return null;try{return new t.L.Icon({iconUrl:"/leaflet/marker-icon-red.png",shadowUrl:"/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})}catch(s){return console.error("Failed to create custom icon:",s),null}},[t==null?void 0:t.L]);if(r.useEffect(()=>{(async()=>{try{const[s,o]=await Promise.all([L(()=>import("./leaflet-src-BOn6DA1B.js").then(i=>i.l),__vite__mapDeps([0,1,2])),L(()=>import("./index-CE07PzCI.js"),__vite__mapDeps([3,1,2,0]))]);delete s.default.Icon.Default.prototype._getIconUrl,s.default.Icon.Default.mergeOptions({iconRetinaUrl:"/leaflet/marker-icon-2x.png",iconUrl:"/leaflet/marker-icon.png",shadowUrl:"/leaflet/marker-shadow.png"}),P({L:s.default,...o})}catch(s){console.error("Failed to load map components:",s)}})()},[]),!t)return e.jsx(C,{className:"overflow-hidden",children:e.jsx("div",{className:"relative flex items-center justify-center",style:{height:x},children:e.jsx(Z,{text:"Loading map..."})})});const{MapContainer:R,TileLayer:T,Marker:B,Popup:F,useMap:z,useMapEvents:V}=t;t.L;function A(){const n=z();return r.useEffect(()=>{if(a){const s=()=>{const o=n.getCenter(),i=n.getZoom();E([o.lat,o.lng]),I(i),S([o.lat,o.lng],i)};return n.on("moveend",s),n.on("zoomend",s),()=>{n.off("moveend",s),n.off("zoomend",s)}}},[n]),null}function H(){return V({click:n=>{y&&y(n.latlng.lat,n.latlng.lng)}}),null}function D(){const n=z();return e.jsxs("div",{className:"absolute top-4 right-4 z-[1000] flex flex-col gap-1",children:[e.jsx(v,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:()=>n.zoomIn(),"aria-label":"Zoom in",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(v,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:()=>n.zoomOut(),"aria-label":"Zoom out",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(v,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:()=>{n.locate({setView:!0,maxZoom:10})},"aria-label":"Go to my location",children:e.jsx(se,{className:"h-4 w-4"})})]})}const q=l?[l.latitude,l.longitude]:O,J=l?13:U;return e.jsxs("div",{className:"relative overflow-hidden rounded-lg border bg-card",style:{height:x},children:[e.jsxs(R,{center:q,zoom:J,className:"h-full w-full",zoomControl:!1,children:[e.jsx(T,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&e.jsx(A,{}),y&&e.jsx(H,{}),j&&e.jsx(D,{}),c.map(n=>{const s=(l==null?void 0:l.iata)===n.iata,o=`marker-${n.iata}-${n.icao}-${s?"selected":"default"}`,i={position:[n.latitude,n.longitude],draggable:g,eventHandlers:{click:()=>{$(n)},dragend:K=>{if(w&&g){const b=K.target.getLatLng();w(n,b.lat,b.lng)}}}};return s&&_&&(i.icon=_),e.jsx(B,{...i,children:e.jsx(F,{children:e.jsxs("div",{className:"p-2 min-w-[200px] max-w-[300px]",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:[n.city,", ",n.region,", ",n.country]}),e.jsxs("div",{className:"flex gap-2 text-xs mb-2",children:[e.jsx(M,{variant:"outline",className:"px-1.5 py-0",children:n.iata}),e.jsx(M,{variant:"outline",className:"px-1.5 py-0",children:n.icao})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Elevation:"}),e.jsxs("span",{children:[n.elevation_ft.toLocaleString()," ft"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Coordinates:"}),e.jsxs("span",{children:[n.latitude.toFixed(4),", ",n.longitude.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Timezone:"}),e.jsx("span",{children:n.timezone})]})]}),g&&e.jsx("div",{className:"mt-3 pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(ee,{className:"inline h-3 w-3 mr-1"}),"Drag marker to reposition"]})})]})})},o)})]}),c.length>0&&e.jsx("div",{className:"absolute bottom-4 left-4 bg-background/90 backdrop-blur-sm rounded-md p-3 shadow-lg z-[1000]",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(X,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{children:[c.length," airport",c.length!==1?"s":""," displayed"]})]})})]})}function je(c){const[h,d]=r.useState(!1),{mapState:f,updateMapCenter:p,updateMapZoom:x,setSelectedAirport:j,updateMapState:a}=Q(),{preferences:m}=W();return r.useEffect(()=>{d(!0)},[]),h?e.jsx(le,{...c,mapState:f,updateMapCenter:p,updateMapZoom:x,setGlobalSelectedAirport:j,updateMapState:a,preferences:m}):e.jsx(C,{className:"overflow-hidden",children:e.jsx("div",{className:"relative flex items-center justify-center",style:{height:c.height||"500px"},children:e.jsx(Z,{text:"Loading map..."})})})}export{je as MapView};
