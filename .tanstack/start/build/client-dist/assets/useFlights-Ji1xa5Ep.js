import{c as h,ad as y}from"./main-C72e0wOY.js";import{f as o,A as n,u as m}from"./config-CNtJ7dC6.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],f=h("TrendingUp",d),s=new y(5,6e4);function u(){const{username:e,password:t}=n.openSky;return{Authorization:`Basic ${btoa(`${e}:${t}`)}`}}const g={async getAllStates(e){if(!s.canMakeRequest()){const a=s.getResetTime(),r=Math.max(0,a-Date.now());throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(r/1e3)} seconds. Remaining requests: ${s.getRemainingRequests()}`)}return await o(`${n.openSky.baseUrl}${n.openSky.endpoints.allStates}`,{headers:u(),params:e})},async getFlightTrack(e,t){if(!s.canMakeRequest()){const l=s.getResetTime(),c=Math.max(0,l-Date.now());throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(c/1e3)} seconds. Remaining requests: ${s.getRemainingRequests()}`)}const a=t||Math.floor(Date.now()/1e3)-1800;return await o(`${n.openSky.baseUrl}${n.openSky.endpoints.tracks}`,{headers:u(),params:{icao24:e,time:a}})},async getFlightsByAircraft(e,t,a){if(!s.canMakeRequest()){const l=s.getResetTime(),c=Math.max(0,l-Date.now());throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(c/1e3)} seconds. Remaining requests: ${s.getRemainingRequests()}`)}return await o(`${n.openSky.baseUrl}${n.openSky.endpoints.flights.aircraft}`,{headers:u(),params:{icao24:e,begin:t,end:a}})},async getAirportArrivals(e,t,a){if(!s.canMakeRequest()){const l=s.getResetTime(),c=Math.max(0,l-Date.now());throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(c/1e3)} seconds. Remaining requests: ${s.getRemainingRequests()}`)}return await o(`${n.openSky.baseUrl}${n.openSky.endpoints.flights.arrival}`,{headers:u(),params:{airport:e,begin:t,end:a}})},async getAirportDepartures(e,t,a){if(!s.canMakeRequest()){const l=s.getResetTime(),c=Math.max(0,l-Date.now());throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(c/1e3)} seconds. Remaining requests: ${s.getRemainingRequests()}`)}return await o(`${n.openSky.baseUrl}${n.openSky.endpoints.flights.departure}`,{headers:u(),params:{airport:e,begin:t,end:a}})},async getFlightsNearLocation(e,t,a){const r={lamin:e-a,lomin:t-a,lamax:e+a,lomax:t+a};return this.getAllStates(r)}},i={all:["flights"],states:()=>[...i.all,"states"],statesByBounds:e=>[...i.states(),e],statesNearLocation:(e,t,a)=>[...i.states(),{lat:e,lon:t,radius:a}],track:(e,t)=>[...i.all,"track",e,t],byAircraft:(e,t,a)=>[...i.all,"aircraft",e,{begin:t,end:a}],arrivals:(e,t,a)=>[...i.all,"arrivals",e,{begin:t,end:a}],departures:(e,t,a)=>[...i.all,"departures",e,{begin:t,end:a}]};function R(e){return m({queryKey:i.states(),queryFn:()=>g.getAllStates(),staleTime:10*1e3,gcTime:30*1e3,refetchInterval:30*1e3,...e})}function T(e,t){return m({queryKey:i.track(e,t),queryFn:()=>g.getFlightTrack(e,t),staleTime:5*60*1e3,gcTime:10*60*1e3,enabled:!!e})}function k(e,t){return m({queryKey:i.byAircraft(e,0,0),queryFn:async()=>(await g.getAllStates()).find(r=>r.icao24===e)||null,staleTime:10*1e3,gcTime:30*1e3,enabled:!!e&&!0})}function q(e,t){return m({queryKey:[...i.all,"airport",e,(t==null?void 0:t.type)||"all"],queryFn:async()=>(await g.getAllStates()).filter(r=>{var l;return((l=r.callsign)==null?void 0:l.includes(e))||!1}),staleTime:30*1e3,gcTime:60*1e3,enabled:!!e&&((t==null?void 0:t.enabled)??!0)})}export{f as T,R as a,k as b,T as c,q as u};
